{
    "scheduled_shutdown": {
        "name": "定时关机",
        "trigger_type": "schedule",
        "schedule_expression": "0 23 * * *",
        "script_body": "#!/bin/bash\n# 定时关机模板：在调度时间执行本脚本将立即关机（需要 sudo 权限）\nif command -v systemctl >/dev/null 2>&1; then\n  echo \"使用 systemctl 关机...\"\n  sudo systemctl poweroff || { echo \"关机命令失败\"; exit 1; }\nelse\n  echo \"使用 shutdown 命令关机...\"\n  sudo shutdown -h now || { echo \"关机命令失败\"; exit 1; }\nfi\nexit 0"
    },
    "scheduled_poweron": {
        "name": "定时开机",
        "trigger_type": "schedule",
        "schedule_expression": "0 7 * * *",
        "script_body": "#!/bin/bash\n# 定时开机模板：设置 RTC 唤醒时间以在指定时间开机。\n# 默认设为次日 07:00，或通过环境变量 WAKE_AT=\"YYYY-MM-DD HH:MM\" 覆盖\nWAKE_AT=\"${WAKE_AT:-}\"\nif [ -z \"$WAKE_AT\" ]; then\n  WAKE_AT=$(date -d \"tomorrow 07:00\" +%Y-%m-%d\\ %H:%M)\nfi\necho \"将设置唤醒时间为: $WAKE_AT\"\nif command -v rtcwake >/dev/null 2>&1; then\n  RTCTIME=$(date -d \"$WAKE_AT\" +%s)\n  sudo rtcwake -m no -t \"$RTCTIME\" && echo \"唤醒时间已写入 rtc\" || { echo \"rtcwake 写入失败\"; exit 1; }\nelif [ -w /sys/class/rtc/rtc0/wakealarm ]; then\n  echo 0 | sudo tee /sys/class/rtc/rtc0/wakealarm >/dev/null\n  TS=$(date -d \"$WAKE_AT\" +%s)\n  echo \"$TS\" | sudo tee /sys/class/rtc/rtc0/wakealarm >/dev/null\n  echo \"唤醒时间已设置到 /sys/class/rtc/rtc0/wakealarm\"\nelse\n  echo \"系统不支持 rtcwake，也无法写入 /sys/class/rtc/rtc0/wakealarm\"\n  exit 1\nfi\nexit 0"
    },
    "empty_trash": {
        "name": "清理回收站",
        "trigger_type": "schedule",
        "schedule_expression": "0 2 * * *",
        "script_body": "#!/bin/bash\n# 清理回收站（用户级）：删除 ~/.local/share/Trash 下的文件与信息\nTRASH_DIRS=(\"$HOME/.local/share/Trash/files\" \"$HOME/.local/share/Trash/info\")\nfor d in \"${TRASH_DIRS[@]}\"; do\n  if [ -d \"$d\" ]; then\n    echo \"清理 $d\"\n    rm -rf \"${d:?}/\"* || true\n  else\n    echo \"$d 不存在\"\n  fi\ndone\necho \"回收站清理完成\"\nexit 0"
    },
    "backup_home": {
        "name": "定期备份家目录",
        "trigger_type": "schedule",
        "schedule_expression": "0 3 * * *",
        "script_body": "#!/bin/bash\n# 将当前用户主目录打包到 /var/backups （请确保有写权限或修改目标路径）\nSTAMP=$(date +\"%Y%m%d-%H%M%S\")\nDEST=\"/var/backups/home-${STAMP}.tar.gz\"\necho \"开始备份: ${DEST}\"\ntar -czf \"${DEST}\" \"$HOME\" || { echo \"备份失败\"; exit 1; }\necho \"备份完成: ${DEST}\"\nexit 0"
    },
    "clean_tmp": {
        "name": "清理临时文件",
        "trigger_type": "schedule",
        "schedule_expression": "0 4 * * *",
        "script_body": "#!/bin/bash\n# 删除 /tmp 中 7 天以上未访问的普通文件\necho \"开始清理 /tmp（7天未访问）\"\nfind /tmp -type f -atime +7 -print -delete || true\necho \"清理完成\"\nexit 0"
    },
    "restart_service": {
        "name": "重启服务（占位）",
        "trigger_type": "schedule",
        "schedule_expression": "0 5 * * 0",
        "script_body": "#!/bin/bash\n# 将 SERVICE_NAME 替换为需要重启的服务名，例如 sshd 或 nginx\nSERVICE_NAME=\"your-service-name\"\nif command -v systemctl >/dev/null 2>&1; then\n  echo \"使用 systemctl 重启 ${SERVICE_NAME}\"\n  sudo systemctl restart \"${SERVICE_NAME}\" || { echo \"重启失败\"; exit 1; }\nelse\n  echo \"systemctl 不可用，请手动重启 ${SERVICE_NAME}\"\n  exit 1\nfi\necho \"重启命令已执行\"\nexit 0"
    },
    "rotate_logs": {
        "name": "压缩旧日志",
        "trigger_type": "schedule",
        "schedule_expression": "30 2 * * *",
        "script_body": "#!/bin/bash\n# 将 /var/log 下超过 7 天的 .log 文件压缩并保留原始（示例）\nLOG_DIR=\"/var/log\"\necho \"开始压缩旧日志\"\nfind \"${LOG_DIR}\" -type f -name '*.log' -mtime +7 -print | while read -r file; do\n  gzip -9 \"$file\" && echo \"已压缩: $file\"\ndone\necho \"压缩完成\"\nexit 0"
    },
    "disk_check": {
        "name": "磁盘使用检查",
        "trigger_type": "schedule",
        "schedule_expression": "*/30 * * * *",
        "script_body": "#!/bin/bash\n# 检查根分区使用率，超过阈值时退出码为 1\nTHRESHOLD=85\nUSAGE=$(df / --output=pcent | tail -n1 | tr -dc '0-9')\necho \"当前 / 使用率: ${USAGE}%\"\nif [ \"$USAGE\" -ge \"$THRESHOLD\" ]; then\n  echo \"磁盘使用超过 ${THRESHOLD}%: ${USAGE}%\"\n  exit 1\nfi\nexit 0"
    }
}